<dv-gesuch-app-pattern-gesuch-step-layout [step]="GesuchFormSteps.ELTERN">
  <div
    data-testid="form-person-loading"
    *ngIf="view$().loading"
    class="my-2 p-2 py-4 d-flex rounded shadow-sm border"
  >
    <div class="dv-progress-bar-indeterminate">
      <div></div>
    </div>
  </div>

  <dv-gesuch-app-feature-gesuch-form-eltern-editor
    *ngIf="editedParent"
    [elternteil]="editedParent"
    (saveTriggered)="handleEditorSave($event)"
    (autoSaveTriggered)="handleEditorAutoSave($event)"
    (closeTriggered)="handleEditorClose()"
  />

  <ng-container *ngIf="!editedParent">
    <div class="row g-4">
      <div class="col-12 col-md-6">
        <div
          class="card border-2 justify-content-center align-items-center"
          *ngIf="view$().isVaterPlaceholder"
        >
          <div class="card-body">
            <button
              type="button"
              class="btn btn-primary"
              (click)="handleAddVater()"
            >
              Add vater
            </button>
          </div>
        </div>
      </div>

      <div class="col-12 col-md-6">
        <div
          class="card border-2 justify-content-center align-items-center"
          *ngIf="view$().isMutterPlaceholder"
        >
          <div class="card-body">
            <button type="button" class="btn btn-primary">Add mutter</button>
          </div>
        </div>
      </div>

      <div
        class="col-12 col-md-6"
        *ngFor="let parent of view$().elterns; trackBy: trackByIndex"
      >
        <div class="card border-2">
          <div class="card-body">
            {{ parent.name }} {{ parent.vorname }}
            <button
              type="button"
              class="btn btn-primary"
              (click)="handleEdit(parent)"
            >
              Edit
            </button>
            <button type="button" class="btn btn-danger">Remove</button>
          </div>
        </div>
      </div>
    </div>
    <div class="mt-5 d-flex flex-column gap-3 flex-md-row justify-content-end">
      <button type="button" class="btn btn-primary" (click)="handleContinue()">
        {{ 'gesuch-app.form.gonext' | translate }}
      </button>
    </div>
  </ng-container>
</dv-gesuch-app-pattern-gesuch-step-layout>
