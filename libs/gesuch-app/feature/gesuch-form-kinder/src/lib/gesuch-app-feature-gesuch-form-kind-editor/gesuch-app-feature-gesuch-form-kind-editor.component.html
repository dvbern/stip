<form [formGroup]="form" novalidate class="mt-4" (ngSubmit)="handleSave()">
  <div class="row g-4 my-2">
    <dv-shared-ui-form-field class="col-12 col-md-6 col-xl-4">
      <dv-shared-ui-form-label>{{
        'gesuch-app.form.shared.lastname.label' | translate
      }}</dv-shared-ui-form-label>
      <input
        dvSharedUiFormLabelTarget
        formControlName="name"
        class="form-control"
        type="text"
      />
      <dv-shared-ui-form-message *dvSharedUiFormMessageError="'required'">
        {{ 'shared.form.error.required' | translate }}
      </dv-shared-ui-form-message>
    </dv-shared-ui-form-field>
    <dv-shared-ui-form-field class="col-12 col-md-6 col-xl-4">
      <dv-shared-ui-form-label>{{
        'gesuch-app.form.shared.firstname.label' | translate
      }}</dv-shared-ui-form-label>
      <input
        dvSharedUiFormLabelTarget
        formControlName="vorname"
        class="form-control"
        type="text"
      />
      <dv-shared-ui-form-message *dvSharedUiFormMessageError="'required'">
        {{ 'shared.form.error.required' | translate }}
      </dv-shared-ui-form-message>
    </dv-shared-ui-form-field>
  </div>

  <div class="row g-4 my-2">
    <!-- GEBURTSDATUM -->
    <dv-shared-ui-form-field class="col-12 col-md-6 col-xl-4">
      <dv-shared-ui-form-label>{{
        'gesuch-app.form.shared.birthday.label' | translate
      }}</dv-shared-ui-form-label>

      <div class="input-group">
        <input
          class="form-control"
          placeholder="dd.mm.yyyy"
          dvSharedUiFormLabelTarget
          formControlName="geburtsdatum"
          (blur)="onGeburtsdatumBlur($event)"
        />
      </div>

      <dv-shared-ui-form-message *dvSharedUiFormMessageError="'required'">
        {{ 'shared.form.error.required' | translate }}
      </dv-shared-ui-form-message>
      <dv-shared-ui-form-message *dvSharedUiFormMessageError="'dateFormat'">
        {{ 'shared.form.error.dateFormat' | translate }}
      </dv-shared-ui-form-message>
      <dv-shared-ui-form-message *dvSharedUiFormMessageError="'minDate'">
        {{ 'shared.form.error.minDatePast' | translate }}
      </dv-shared-ui-form-message>
      <dv-shared-ui-form-message *dvSharedUiFormMessageError="'maxDate'">
        {{ 'shared.form.error.maxDatePast' | translate }}
      </dv-shared-ui-form-message>
    </dv-shared-ui-form-field>

    <!-- Wohnsitz -->
    <dv-shared-ui-form-field class="col-12 col-md-6 col-xl-4">
      <dv-shared-ui-form-label>{{
        'gesuch-app.form.geschwister.wohnsitz.label' | translate
      }}</dv-shared-ui-form-label>
      <select
        class="form-select"
        dvSharedUiFormLabelTarget
        formControlName="wohnsitz"
      >
        <option [value]="null" disabled selected>
          {{ 'shared.form.select.empty' | translate }}
        </option>
        <option
          [value]="a"
          *ngFor="let a of wohnsitzValues; trackBy: trackByIndex"
        >
          {{ 'gesuch-app.form.geschwister.wohnsitz.select.' + a | translate }}
        </option>
      </select>
      <dv-shared-ui-form-message *dvSharedUiFormMessageError="'required'">
        {{ 'shared.form.error.required' | translate }}
      </dv-shared-ui-form-message>
    </dv-shared-ui-form-field>
  </div>

  <div
    class="row g-4 my-2"
    *ngIf="
      !form.controls.wohnsitzAnteilVater.disabled &&
      !form.controls.wohnsitzAnteilMutter.disabled
    "
  >
    <div class="col-12 col-md-6 col-xl-4">
      <!-- WOHNSITZ AUFTEILUNG -->
      <dv-gesuch-app-ui-percentage-splitter
        [controlA]="form.controls.wohnsitzAnteilMutter"
        [controlB]="form.controls.wohnsitzAnteilVater"
      >
        <dv-shared-ui-form-label>{{
          'gesuch-app.form.geschwister.wohnsitzanteil.label' | translate
        }}</dv-shared-ui-form-label>
        <dv-shared-ui-form-label class="label-a">{{
          'gesuch-app.form.geschwister.wohnsitzanteil.mutter' | translate
        }}</dv-shared-ui-form-label>
        <dv-shared-ui-form-label class="label-b">{{
          'gesuch-app.form.geschwister.wohnsitzanteil.vater' | translate
        }}</dv-shared-ui-form-label>
      </dv-gesuch-app-ui-percentage-splitter>
    </div>
  </div>

  <div class="row g-4 my-2">
    <!-- Ausbildungssituation -->
    <dv-shared-ui-form-field class="col-12 col-md-6 col-xl-4">
      <dv-shared-ui-form-label>{{
        'gesuch-app.form.geschwister.ausbildungssituation.label' | translate
      }}</dv-shared-ui-form-label>
      <div
        class="form-check"
        *ngFor="let a of ausbildungssituationValues; trackBy: trackByIndex"
      >
        <input
          formControlName="ausbildungssituation"
          [value]="a"
          class="form-check-input"
          type="radio"
          name="ausbildungssituation"
          [id]="'elternVerheiratetZusammen' + a"
        />
        <label class="form-check-label" [for]="'elternVerheiratetZusammen' + a">
          {{
            'gesuch-app.form.geschwister.ausbildungssituation.select.' + a
              | translate
          }}
        </label>
      </div>
    </dv-shared-ui-form-field>
  </div>

  <!-- buttons -->
  <dv-gesuch-app-ui-step-form-buttons>
    <button
      type="button"
      class="btn btn-outline-primary"
      (click)="handleCancel()"
    >
      {{ 'gesuch-app.form.back' | translate }}
    </button>
    <button type="submit" class="btn btn-primary">
      {{ 'gesuch-app.form.save-and-back' | translate }}
    </button>
  </dv-gesuch-app-ui-step-form-buttons>
</form>
