@let ausbildung = ausbildungSig();
<mat-expansion-panel [togglePosition]="'before'" class="large">
  <mat-expansion-panel-header>
    <mat-panel-title class="tw-flex tw-flex-col tw-py-8 tw-pl-8">
      <h2 class="tw-flex tw-w-full tw-text-2xl tw-gap-4 tw-mb-3 tw-items-center">
        <dv-shared-ui-icon-chip class="tw-text-gray-400 tw-bg-gray-100">
          <i class="material-symbols-rounded tw-text-lg">school</i>
        </dv-shared-ui-icon-chip>
        {{ 'gesuch-app.dashboard.ausbildung.title' | translate: ausbildung.ausbildungsgang }}
      </h2>

      <p class="tw-my-0 tw-w-full">
        {{
          'gesuch-app.dashboard.ausbildung.description'
            | translate
              : {
                  start: (ausbildung.ausbildungBegin | translatedDate: 'MMMM yyyy' | async),
                  end: (ausbildung.ausbildungEnd | translatedDate: 'MMMM yyyy' | async),
                }
        }}
      </p>
    </mat-panel-title>
  </mat-expansion-panel-header>

  <div class="tw-flex tw-gap-2">
    @for (gesuch of ausbildung.gesuchs; track gesuch) {
      <dv-gesuch-app-ui-dashboard-gesuch
        [ausbildungsStatusSig]="ausbildung.status"
        [gesuchSig]="gesuch"
        [class.bg-tertiary]="ausbildung.status !== 'AKTIV'"
        [class.bg-success-subtle]="ausbildung.status === 'AKTIV'"
        (deleteGesuch)="deleteGesuch.emit($event)"
        (aenderungMelden)="aenderungMelden.emit({ gesuch })"
        (deleteAenderung)="deleteAenderung.emit($event)"
      ></dv-gesuch-app-ui-dashboard-gesuch>
    }
  </div>
</mat-expansion-panel>
