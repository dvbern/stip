<form [formGroup]="form" (ngSubmit)="handleSave()" data-testid="form-notiz-form" class="col-12 col-xl-7">
  @if (notizStore.notiz() | rdIsPendingWithoutCache) {
    <dv-shared-ui-loading></dv-shared-ui-loading>
  } @else {
    <div class="row g-4 mb-4">
      <!-- Datum -->
      <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
        <mat-label>{{ 'shared.form.notizen.datum.label' | translate }}</mat-label>
        <input formControlName="datum" data-testid="form-gesuchsjahr-datum" [readonly]="true" matInput type="text" />
        <mat-error *dvSharedUiFormMessageError="'required'">
          {{ 'shared.form.error.required' | translate }}
        </mat-error>
      </mat-form-field>
    </div>
    <div class="row g-4 mb-4">
      <!-- User -->
      <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
        <mat-label>{{ 'shared.form.notizen.user.label' | translate }}</mat-label>
        <input formControlName="user" data-testid="form-gesuchsjahr-user" [readonly]="true" matInput type="text" />
        <mat-error *dvSharedUiFormMessageError="'required'">
          {{ 'shared.form.error.required' | translate }}
        </mat-error>
      </mat-form-field>
    </div>
    <div class="row g-4 mb-4">
      <!-- Betreff -->
      <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
        <mat-label>{{ 'shared.form.notizen.betreff.label' | translate }}</mat-label>
        <input formControlName="betreff" data-testid="form-gesuchsjahr-betreff" matInput type="text" />
        <mat-error *dvSharedUiFormMessageError="'required'">
          {{ 'shared.form.error.required' | translate }}
        </mat-error>
      </mat-form-field>
    </div>
    <div class="row g-4 mb-4">
      <!-- Text -->
      <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
        <mat-label>{{ 'shared.form.notizen.text.label' | translate }}</mat-label>
        <textarea formControlName="text" data-testid="form-gesuchsjahr-betreff" matInput type="text"></textarea>
        <mat-error *dvSharedUiFormMessageError="'required'">
          {{ 'shared.form.error.required' | translate }}
        </mat-error>
      </mat-form-field>
    </div>

    <dv-shared-ui-form-save class="mt-4" [loading]="notizStore.notiz() | rdIsPending"></dv-shared-ui-form-save>
  }
</form>
