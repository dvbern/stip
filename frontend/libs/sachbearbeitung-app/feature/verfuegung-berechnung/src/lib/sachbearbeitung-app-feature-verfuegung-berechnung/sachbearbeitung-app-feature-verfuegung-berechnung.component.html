<p class="fs-4">{{ 'sachbearbeitung-app.verfuegung.berechnung.details' | transloco }}</p>
@if (berechnungStore.berechnungsViewSig().loading) {
  <dv-shared-ui-loading></dv-shared-ui-loading>
} @else {
  @if (berechnungenRawSig(); as berechnung) {
    <div class="row">
      <div class="col-12">
        <dv-berechnungs-card
          [berechnungSig]="berechnung.persoenlich"
          [stammdatenSig]="berechnung.berechnungsStammdaten"
        >
          <dv-persoenliche-einnahmen
            class="d-flex flex-column gap-3 ps-4"
            [budgetSig]="berechnung.persoenlich"
            [stammdatenSig]="berechnung.berechnungsStammdaten"
          ></dv-persoenliche-einnahmen>
          <dv-persoenliche-kosten
            class="d-flex flex-column gap-3 ps-4"
            [budgetSig]="berechnung.persoenlich"
          ></dv-persoenliche-kosten>
        </dv-berechnungs-card>
      </div>
    </div>
    <div class="tw:flex tw:flex-col tw:gap-6 row mt-4 mb-4">
      @for (familienbudget of berechnung.familien; track $index) {
        <div class="col-12">
          <dv-berechnungs-card [berechnungSig]="familienbudget" [stammdatenSig]="berechnung.berechnungsStammdaten">
            <dv-familien-einnahmen
              class="d-flex flex-column gap-3 ps-4"
              [budgetSig]="familienbudget"
              [stammdatenSig]="berechnung.berechnungsStammdaten"
            ></dv-familien-einnahmen>
            <dv-familien-kosten
              class="d-flex flex-column gap-3 ps-4"
              [budgetSig]="familienbudget"
              [stammdatenSig]="berechnung.berechnungsStammdaten"
            ></dv-familien-kosten>
          </dv-berechnungs-card>
        </div>
      }
    </div>
  } @else {
    <p class="fs-5 text-muted">{{ 'sachbearbeitung-app.verfuegung.berechnung.no-data' | transloco }}</p>
  }
}
