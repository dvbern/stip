<div class="mt-4 row d-flex g-4" *dvTranslocoSb="let t">
  <ng-template dvHeaderSuffix>
    @if (store.currentGesuchsperiodeViewSig(); as view) {
      <mat-chip
        class="ms-2 fw-normal fs-4"
        [class.opacity-50]="view.gueltigkeitStatus === 'PUBLIZIERT_INAKTIV'"
        [color]="view?.statusColor"
        highlighted
        >{{ t(`shared.gesuch.periode.status.${view.gueltigkeitStatus}`) }}</mat-chip
      >
    }
  </ng-template>

  @if (store.currentGesuchsperiodeViewSig()?.isEditable) {
    @if (idSig(); as id) {
      <div class="col-12 col-xl-5 order-xl-1">
        <dv-sachbearbeitung-app-feature-administration-gesuchsperiode-publish
          class="col-12 col-md-3 col-xl-3"
          typeSig="gesuchsperiode"
          [blockedReasonSig]="publishBlockedReasonSig()"
          [unsavedChangesSig]="unsavedChangesSig()"
          (publish)="publish(id)"
        ></dv-sachbearbeitung-app-feature-administration-gesuchsperiode-publish>
      </div>
    }
  }
  <form
    [formGroup]="form"
    [dvSharedUiFormReadonly]="store.currentGesuchsperiodeViewSig()?.isReadonly"
    data-testid="form-gesuchsperiode-form"
    (ngSubmit)="handleSave()"
    class="col-12 col-xl-7"
  >
    @if (store.currentGesuchsperiode() | rdIsPendingWithoutCache: { ignoreInitial: true }) {
      <dv-shared-ui-loading></dv-shared-ui-loading>
    } @else {
      <h1 class="h2 mb-4">
        {{ t('sachbearbeitung-app.admin.gesuchsperiode.metaDaten.title') }}
      </h1>

      <div class="row g-4">
        <!-- BezeichnungDe -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.bezeichnungDe.label') }}</mat-label>
          <input
            formControlName="bezeichnungDe"
            data-testid="form-gesuchsperiode-bezeichnungDe"
            matInput
            dvMaxLength
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>
        <!-- BezeichnungFr -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.bezeichnungFr.label') }}</mat-label>
          <input
            formControlName="bezeichnungFr"
            data-testid="form-gesuchsperiode-bezeichnungFr"
            matInput
            dvMaxLength
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- Fiskaljahr -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.fiskaljahr.label') }}</mat-label>
          <input
            formControlName="fiskaljahr"
            data-testid="form-gesuchsperiode-fiskaljahr"
            matInput
            [maskito]="maskitoYear"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>

        <!-- Gesuchsjahr/Ausbildungsjahr -->

        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.gesuchsjahr.label') }}</mat-label>
          @if (store.gesuchsjahre() | rdIsPending) {
            <dv-shared-ui-loading
              class="position-absolute top-50 start-50 translate-middle"
              type="icon"
            ></dv-shared-ui-loading>
          }
          <mat-select
            formControlName="gesuchsjahrId"
            data-testid="form-gesuchsperiode-gesuchsjahr"
            [placeholder]="t('shared.form.select.empty')"
          >
            @for (jahr of store.gesuchsjahre.data(); track $index) {
              <mat-option [attr.data-testid]="'gesuchsjahr-' + jahr" [value]="jahr.id">
                {{ jahr | translatedProp: 'bezeichnung' : translate.getActiveLang() }}
              </mat-option>
            }
          </mat-select>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- Gesuchsperiode Start -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.gesuchsperiodeStart.label') }}</mat-label>
          <input
            formControlName="gesuchsperiodeStart"
            data-testid="form-gesuchsperiodeStart"
            matInput
            [dvMaxLength]="'small'"
            [matDatepicker]="gesuchsperiodeStartDatepicker"
          />
          <mat-datepicker-toggle matIconSuffix [for]="gesuchsperiodeStartDatepicker"></mat-datepicker-toggle>
          <mat-datepicker #gesuchsperiodeStartDatepicker></mat-datepicker>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>

        <!-- Gesuchsperiode Stopp -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.gesuchsperiodeStopp.label') }}</mat-label>
          <input
            formControlName="gesuchsperiodeStopp"
            data-testid="form-gesuchsperiode-gesuchsperiodeStopp"
            matInput
            [dvMaxLength]="'small'"
            [matDatepicker]="gesuchsperiodeStoppDatepicker"
          />
          <mat-datepicker-toggle matIconSuffix [for]="gesuchsperiodeStoppDatepicker"></mat-datepicker-toggle>
          <mat-datepicker #gesuchsperiodeStoppDatepicker></mat-datepicker>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- Aufschalttermin Start -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.aufschaltterminStart.label') }}</mat-label>
          <input
            formControlName="aufschaltterminStart"
            data-testid="form-gesuchsperiode-aufschaltterminStart"
            matInput
            [dvMaxLength]="'small'"
            [matDatepicker]="aufschaltterminStartDatepicker"
          />
          <mat-datepicker-toggle matIconSuffix [for]="aufschaltterminStartDatepicker"></mat-datepicker-toggle>
          <mat-datepicker #aufschaltterminStartDatepicker></mat-datepicker>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- Einreichefrist Normal -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.einreichefristNormal.label') }}</mat-label>
          <input
            formControlName="einreichefristNormal"
            data-testid="form-gesuchsperiode-einreichefrist-normal"
            matInput
            [dvMaxLength]="'small'"
            [matDatepicker]="einreicherfristNormalDatepicker"
          />
          <mat-datepicker-toggle matIconSuffix [for]="einreicherfristNormalDatepicker"></mat-datepicker-toggle>
          <mat-datepicker #einreicherfristNormalDatepicker></mat-datepicker>
          <mat-hint>{{ t('sachbearbeitung-app.admin.gesuchsperiode.einreichefristNormal.info') }}</mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>

        <!-- Einreichefrist Reduziert -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.einreichefristReduziert.label') }}</mat-label>
          <input
            formControlName="einreichefristReduziert"
            data-testid="form-gesuchsperiode-einreichefrist-reduziert"
            matInput
            [dvMaxLength]="'small'"
            [matDatepicker]="einreicherfristReduziertDatepicker"
          />
          <mat-datepicker-toggle matIconSuffix [for]="einreicherfristReduziertDatepicker"></mat-datepicker-toggle>
          <mat-datepicker #einreicherfristReduziertDatepicker></mat-datepicker>
          <mat-hint>{{ t('sachbearbeitung-app.admin.gesuchsperiode.einreichefristReduziert.info') }}</mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- Frist Nachreichen von Dokumenten -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.fristNachreichenDokumente.label') }}</mat-label>
          <input
            formControlName="fristNachreichenDokumente"
            data-testid="form-gesuchsperiode-frist-nachreichen-dokumente"
            matInput
            type="number"
            min="0"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>
        <!-- Stichtag Volljaehrigkeit Medizinische-Grundversorgung -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{
            t('sachbearbeitung-app.admin.gesuchsperiode.stichtag-volljaehrigkeit-medizinische-grundversorgung.label')
          }}</mat-label>
          <input
            formControlName="stichtagVolljaehrigkeitMedizinischeGrundversorgung"
            data-testid="form-gesuchsperiode-einreichefrist-reduziert"
            matInput
            [dvMaxLength]="'small'"
            [matDatepicker]="stichtagVolljaehrigkeitMedizinischeGrundversorgungDatepicker"
          />
          <mat-datepicker-toggle
            matIconSuffix
            [for]="stichtagVolljaehrigkeitMedizinischeGrundversorgungDatepicker"
          ></mat-datepicker-toggle>
          <mat-datepicker #stichtagVolljaehrigkeitMedizinischeGrundversorgungDatepicker></mat-datepicker>
          <mat-hint>{{
            t('sachbearbeitung-app.admin.gesuchsperiode.stichtag-volljaehrigkeit-medizinische-grundversorgung.info')
          }}</mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- Zweiter Auszahlungstermin Monat-->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.zweiterAuszahlungsterminMonat.label') }}</mat-label>
          <input
            formControlName="zweiterAuszahlungsterminMonat"
            data-testid="form-gesuchsperiode-zweiterAuszahlungsterminMonat"
            matInput
            type="number"
            min="0"
            [max]="maxZweiterAuszahlungsterminMonat"
          />
          <mat-hint>{{ t('sachbearbeitung-app.admin.gesuchsperiode.zweiterAuszahlungsterminMonat.info') }}</mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
          <mat-error *dvSharedUiFormMessageError="'max'">
            {{ t('shared.form.error.max', { max: maxZweiterAuszahlungsterminMonat }) }}
          </mat-error>
        </mat-form-field>

        <!-- Tag der Auszahlung für zweiten Auszahlungstermin-->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.zweiterAuszahlungsterminTag.label') }}</mat-label>
          <input
            formControlName="zweiterAuszahlungsterminTag"
            data-testid="form-gesuchsperiode-zweiterAuszahlungsterminTag"
            matInput
            type="number"
            [min]="minZweiterAuszahlungsterminTag"
            [max]="maxZweiterAuszahlungsterminTag"
          />
          <mat-hint>{{ t('sachbearbeitung-app.admin.gesuchsperiode.zweiterAuszahlungsterminTag.info') }}</mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
          <mat-error *dvSharedUiFormMessageError="'min'">
            {{ t('shared.form.error.min', { min: minZweiterAuszahlungsterminTag }) }}
          </mat-error>
          <mat-error *dvSharedUiFormMessageError="'max'">
            {{ t('shared.form.error.max', { max: maxZweiterAuszahlungsterminTag }) }}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Stammdaten -->
      <h1 class="h2 pt-5 mb-4">
        {{ t('sachbearbeitung-app.admin.gesuchsperiode.stammdaten.title') }}
      </h1>

      <div class="row g-4">
        <!-- Freibetrag Vermögen -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.freibetrag_vermoegen.label') }}</mat-label>
          <mat-hint>{{ t('sachbearbeitung-app.admin.gesuchsperiode.freibetrag_vermoegen.info') }}</mat-hint>
          <input
            formControlName="freibetrag_vermoegen"
            data-testid="form-gesuchsperiode-freibetrag_vermoegen"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>

        <!-- Freibetrag Erwerbseinkommen -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.freibetrag_erwerbseinkommen.label') }}</mat-label>
          <input
            formControlName="freibetrag_erwerbseinkommen"
            data-testid="form-gesuchsperiode-freibetrag_erwerbseinkommen"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint>{{ t('sachbearbeitung-app.admin.gesuchsperiode.freibetrag_erwerbseinkommen.info') }}</mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- Einkommensfreibetrag -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.einkommensfreibetrag.label') }}</mat-label>
          <input
            formControlName="einkommensfreibetrag"
            data-testid="form-gesuchsperiode-einkommensfreibetrag"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint>{{ t('sachbearbeitung-app.admin.gesuchsperiode.einkommensfreibetrag.info') }}</mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>

        <!-- Elternbeteiligungssatz -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.elternbeteiligungssatz.label') }}</mat-label>
          <input
            formControlName="elternbeteiligungssatz"
            data-testid="form-gesuchsperiode-elternbeteiligungssatz"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- VermogenSatzAngerechnet -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.vermogenSatzAngerechnet.label') }}</mat-label>
          <input
            formControlName="vermogenSatzAngerechnet"
            data-testid="form-gesuchsperiode-vermogenSatzAngerechnet"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>

        <!-- Integrationszulage -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.integrationszulage.label') }}</mat-label>
          <input
            formControlName="integrationszulage"
            data-testid="form-gesuchsperiode-integrationszulage"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1 mb-4">
        <!-- Limite_EkFreibetrag_Integrationszulag -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label
            >{{ t('sachbearbeitung-app.admin.gesuchsperiode.limite_EkFreibetrag_Integrationszulage.label') }}
          </mat-label>
          <input
            formControlName="limite_EkFreibetrag_Integrationszulage"
            data-testid="form-gesuchsperiode-limite_EkFreibetrag_Integrationszulage"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint>{{
            t('sachbearbeitung-app.admin.gesuchsperiode.limite_EkFreibetrag_Integrationszulage.info')
          }}</mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>

        <!-- StipLimite_Minimalstipendium -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.stipLimite_Minimalstipendium.label') }}</mat-label>
          <input
            formControlName="stipLimite_Minimalstipendium"
            data-testid="form-gesuchsperiode-stipLimite_Minimalstipendium"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- Preis pro Mahlzeit -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.preisProMahlzeit.label') }}</mat-label>
          <input
            formControlName="preisProMahlzeit"
            data-testid="form-gesuchsperiode-preisProMahlzeit"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>

        <!-- Max Säule 3a -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.maxSaeule3a.label') }}</mat-label>
          <input
            formControlName="maxSaeule3a"
            data-testid="form-gesuchsperiode-maxSaeule3a"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- Anzahl Wochen Lehre -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.anzahlWochenLehre.label') }}</mat-label>
          <input
            formControlName="anzahlWochenLehre"
            data-testid="form-gesuchsperiode-anzahlWochenLehre"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>

        <!-- Anzahl Wochen Schule -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.anzahlWochenSchule.label') }}</mat-label>
          <input
            formControlName="anzahlWochenSchule"
            data-testid="form-gesuchsperiode-anzahlWochenSchule"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- Vermoegensanteil In Prozent-->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.vermoegensanteilInProzent.label') }}</mat-label>
          <input
            formControlName="vermoegensanteilInProzent"
            data-testid="form-gesuchsperiode-vermoegensanteilInProzent"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint>{{ t('sachbearbeitung-app.admin.gesuchsperiode.vermoegensanteilInProzent.info') }}</mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>

        <!-- Limite des Alters des Antragsstellers für die Halbierung des Elternbeitrags-->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{
            t('sachbearbeitung-app.admin.gesuchsperiode.limiteAlterAntragsstellerHalbierungElternbeitrag.label')
          }}</mat-label>
          <input
            formControlName="limiteAlterAntragsstellerHalbierungElternbeitrag"
            data-testid="form-gesuchsperiode-limiteAlterAntragsstellerHalbierungElternbeitrag"
            matInput
            min="1"
            type="number"
          />
          <mat-hint>{{
            t('sachbearbeitung-app.admin.gesuchsperiode.limiteAlterAntragsstellerHalbierungElternbeitrag.info')
          }}</mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
          <mat-error *dvSharedUiFormMessageError="'min'">
            {{ t('shared.form.error.min', { min: 1 }) }}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Ausbildungskosten (pers. Budget) -->
      <h2 class="h3 pt-5 mb-4">
        {{ t('sachbearbeitung-app.admin.gesuchsperiode.ausbildungskosten.title') }}
      </h2>

      <div class="row g-4">
        <!-- Sekundarstufe II -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.ausbKosten_SekII.label') }}</mat-label>
          <input
            formControlName="ausbKosten_SekII"
            data-testid="form-gesuchsperiode-AusbKosten_SekII"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>

        <!-- Teritärstufe -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.ausbKosten_Tertiaer.label') }}</mat-label>
          <input
            formControlName="ausbKosten_Tertiaer"
            data-testid="form-gesuchsperiode-ausbKosten_Tertiaer"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Grundbedarf -->
      <h2 class="h3 pt-5 mb-4">
        {{ t('sachbearbeitung-app.admin.gesuchsperiode.grundbedarf.title') }}
      </h2>

      <div class="row g-4">
        <!-- Reduzierung des Grundbedarfs -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-12">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.reduzierungDesGrundbedarfs.label') }}</mat-label>
          <input
            formControlName="reduzierungDesGrundbedarfs"
            data-testid="form-gesuchsperiode-reduzierungDesGrundbedarfs"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint>{{ t('sachbearbeitung-app.admin.gesuchsperiode.reduzierungDesGrundbedarfs.info') }}</mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- 1 Person -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.person_1.label') }}</mat-label>
          <input
            formControlName="person_1"
            data-testid="form-gesuchsperiode-person_1"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>

        <!-- 2 Personen -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.personen_2.label') }}</mat-label>
          <input
            formControlName="personen_2"
            data-testid="form-gesuchsperiode-personen_2"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- 3 Personen -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.personen_3.label') }}</mat-label>
          <input
            formControlName="personen_3"
            data-testid="form-gesuchsperiode-personen_3"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>

        <!-- 4 Personen -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.personen_4.label') }}</mat-label>
          <input
            formControlName="personen_4"
            data-testid="form-gesuchsperiode-personen_4"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- 5 Personen -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.personen_5.label') }}</mat-label>
          <input
            formControlName="personen_5"
            data-testid="form-gesuchsperiode-personen_5"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>

        <!-- 6 Personen -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.personen_6.label') }}</mat-label>
          <input
            formControlName="personen_6"
            data-testid="form-gesuchsperiode-personen_6"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- 7 Personen -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.personen_7.label') }}</mat-label>
          <input
            formControlName="personen_7"
            data-testid="form-gesuchsperiode-personen_7"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>

        <!-- Pro weitere Person -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.proWeiterePerson.label') }}</mat-label>
          <input
            formControlName="proWeiterePerson"
            data-testid="form-gesuchsperiode-proWeiterePerson"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Medizinische Grundversorgung -->
      <h2 class="h3 pt-5 mb-4">
        {{ t('sachbearbeitung-app.admin.gesuchsperiode.medizinische_grundversorgung.title') }}
      </h2>

      <div class="row g-4">
        <!-- Kinder 00-17 -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.kinder_00_17.label') }}</mat-label>
          <input
            formControlName="kinder_00_17"
            data-testid="form-gesuchsperiode-kinder_00_17"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint>{{ t('sachbearbeitung-app.admin.gesuchsperiode.kinder_00_17.info') }}</mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>

        <!-- Jugendliche Erwachsene 18-24 -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.jugendliche_erwachsene_18_24.label') }}</mat-label>
          <input
            formControlName="jugendliche_erwachsene_18_24"
            data-testid="form-gesuchsperiode-jugendliche_erwachsene_18_24"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint>{{ t('sachbearbeitung-app.admin.gesuchsperiode.jugendliche_erwachsene_18_24.info') }}</mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- Erwachsene 25-99 -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.erwachsene_25_99.label') }}</mat-label>
          <input
            formControlName="erwachsene_25_99"
            data-testid="form-gesuchsperiode-erwachsene_25_99"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint>{{ t('sachbearbeitung-app.admin.gesuchsperiode.erwachsene_25_99.info') }}</mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Wohnkosten (Familienbudget) -->
      <h2 class="h3 pt-5 mb-4">
        {{ t('sachbearbeitung-app.admin.gesuchsperiode.wohnkosten-familienbudget.title') }}
      </h2>

      <div class="row g-4">
        <!-- 1 Person (2 Zimmer) -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_fam_1pers.label') }}</mat-label>
          <input
            formControlName="wohnkosten_fam_1pers"
            data-testid="form-gesuchsperiode-wohnkosten_fam_1pers"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint>{{ t('sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_fam_1pers.info') }}</mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>

        <!-- 2 Person (3 Zimmer) -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_fam_2pers.label') }}</mat-label>
          <input
            formControlName="wohnkosten_fam_2pers"
            data-testid="form-gesuchsperiode-wohnkosten_fam_2pers"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint>{{ t('sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_fam_2pers.info') }}</mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- 3 Person (4 Zimmer) -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_fam_3pers.label') }}</mat-label>
          <input
            formControlName="wohnkosten_fam_3pers"
            data-testid="form-gesuchsperiode-wohnkosten_fam_3pers"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint>{{ t('sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_fam_3pers.info') }}</mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>

        <!-- 4 Person (5 Zimmer) -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_fam_4pers.label') }}</mat-label>
          <input
            formControlName="wohnkosten_fam_4pers"
            data-testid="form-gesuchsperiode-wohnkosten_fam_4pers"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint>{{ t('sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_fam_4pers.info') }}</mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- 5+ Personen (5+ Zimmer) -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_fam_5pluspers.label') }}</mat-label>
          <input
            formControlName="wohnkosten_fam_5pluspers"
            data-testid="form-gesuchsperiode-wohnkosten_fam_5pluspers"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint>{{ t('sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_fam_5pluspers.info') }}</mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Wohnkosten (Persönliches Budget) -->
      <h2 class="h3 pt-5 mb-4">
        {{ t('sachbearbeitung-app.admin.gesuchsperiode.wohnkosten-persoenlich.title') }}
      </h2>

      <div class="row g-4">
        <!-- 1 Person (2 Zimmer) -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_persoenlich_1pers.label') }}</mat-label>
          <input
            formControlName="wohnkosten_persoenlich_1pers"
            data-testid="form-gesuchsperiode-wohnkosten_persoenlich_1pers"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint>{{ t('sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_persoenlich_1pers.info') }}</mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>

        <!-- 2 Person (3 Zimmer) -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_persoenlich_2pers.label') }}</mat-label>
          <input
            formControlName="wohnkosten_persoenlich_2pers"
            data-testid="form-gesuchsperiode-wohnkosten_persoenlich_2pers"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint>{{ t('sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_persoenlich_2pers.info') }}</mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- 3 Person (4 Zimmer) -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_persoenlich_3pers.label') }}</mat-label>
          <input
            formControlName="wohnkosten_persoenlich_3pers"
            data-testid="form-gesuchsperiode-wohnkosten_persoenlich_3pers"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint>{{ t('sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_persoenlich_3pers.info') }}</mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>

        <!-- 4 Person (5 Zimmer) -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ t('sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_persoenlich_4pers.label') }}</mat-label>
          <input
            formControlName="wohnkosten_persoenlich_4pers"
            data-testid="form-gesuchsperiode-wohnkosten_persoenlich_4pers"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint>{{ t('sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_persoenlich_4pers.info') }}</mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- 5 Person (5+ Zimmer) -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{
            t('sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_persoenlich_5pluspers.label')
          }}</mat-label>
          <input
            formControlName="wohnkosten_persoenlich_5pluspers"
            data-testid="form-gesuchsperiode-wohnkosten_persoenlich_5pluspers"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint>{{ t('sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_persoenlich_5pluspers.info') }}</mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ t('shared.form.error.required') }}
          </mat-error>
        </mat-form-field>
      </div>

      @if (store.currentGesuchsperiodeViewSig()?.isEditable ?? true) {
        <dv-shared-ui-form-save
          class="mt-4"
          [loading]="store.currentGesuchsperiode() | rdIsPending: { ignoreInitial: true }"
        ></dv-shared-ui-form-save>
      }
    }
  </form>
</div>
