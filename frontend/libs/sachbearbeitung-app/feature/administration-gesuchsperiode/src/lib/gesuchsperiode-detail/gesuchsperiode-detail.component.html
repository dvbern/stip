<ng-template dvHeaderSuffix>
  @if (store.currentGesuchsperiodeViewSig(); as view) {
    <mat-chip class="ms-2" [color]="view?.statusColor" highlighted>{{
      'shared.gesuch.status.' + view.gueltigkeitStatus | translate
    }}</mat-chip>
  }
</ng-template>

<div class="mt-4 row d-flex g-4">
  @if (store.currentGesuchsperiodeViewSig()?.isEditable) {
    @if (idSig(); as id) {
      <div class="col-12 col-xl-5 order-xl-1">
        <dv-sachbearbeitung-app-feature-administration-gesuchsperiode-publish
          class="col-12 col-md-3 col-xl-3"
          typeSig="gesuchsperiode"
          [blockedReasonSig]="publishBlockedReasonSig()"
          [unsavedChangesSig]="unsavedChangesSig()"
          (publish)="publish(id)"
        ></dv-sachbearbeitung-app-feature-administration-gesuchsperiode-publish>
      </div>
    }
  }
  <form
    [formGroup]="form"
    [dvSharedUiFormReadonly]="store.currentGesuchsperiodeViewSig()?.isReadonly"
    data-testid="form-gesuchsperiode-form"
    (ngSubmit)="handleSave()"
    class="col-12 col-xl-7"
  >
    @if (store.currentGesuchsperiode() | rdIsPendingWithoutCache) {
      <dv-shared-ui-loading></dv-shared-ui-loading>
    } @else {
      <h1 class="h2 mb-4">
        {{ 'sachbearbeitung-app.admin.gesuchsperiode.metaDaten.title' | translate }}
      </h1>

      <div class="row g-4">
        <!-- BezeichnungDe -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ 'sachbearbeitung-app.admin.gesuchsperiode.bezeichnungDe.label' | translate }}</mat-label>
          <input formControlName="bezeichnungDe" data-testid="form-gesuchsperiode-bezeichnungDe" matInput type="text" />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>
        <!-- BezeichnungFr -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ 'sachbearbeitung-app.admin.gesuchsperiode.bezeichnungFr.label' | translate }}</mat-label>
          <input formControlName="bezeichnungFr" data-testid="form-gesuchsperiode-bezeichnungFr" matInput type="text" />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- Fiskaljahr -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ 'sachbearbeitung-app.admin.gesuchsperiode.fiskaljahr.label' | translate }}</mat-label>
          <input
            formControlName="fiskaljahr"
            data-testid="form-gesuchsperiode-fiskaljahr"
            matInput
            [maskito]="maskitoYear"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>

        <!-- Gesuchsjahr/Ausbildungsjahr -->

        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ 'sachbearbeitung-app.admin.gesuchsperiode.gesuchsjahr.label' | translate }}</mat-label>
          @if (store.gesuchsjahre() | rdIsPending) {
            <dv-shared-ui-loading
              class="position-absolute top-50 start-50 translate-middle"
              type="icon"
            ></dv-shared-ui-loading>
          }
          <mat-select
            formControlName="gesuchsjahrId"
            data-testid="form-gesuchsperiode-gesuchsjahr"
            [placeholder]="'shared.form.select.empty' | translate"
          >
            @for (jahr of store.gesuchsjahre.data(); track $index) {
              <mat-option [attr.data-testid]="'gesuchsjahr-' + jahr" [value]="jahr.id">
                {{ jahr | translatedProp: 'bezeichnung' : translate.currentLang }}
              </mat-option>
            }
          </mat-select>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- Gesuchsperiode Start -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>
            {{ 'sachbearbeitung-app.admin.gesuchsperiode.gesuchsperiodeStart.label' | translate }}
          </mat-label>
          <input
            formControlName="gesuchsperiodeStart"
            data-testid="form-gesuchsperiodeStart"
            matInput
            type="type"
            [matDatepicker]="gesuchsperiodeStartDatepicker"
          />
          <mat-datepicker-toggle matIconSuffix [for]="gesuchsperiodeStartDatepicker"></mat-datepicker-toggle>
          <mat-datepicker #gesuchsperiodeStartDatepicker></mat-datepicker>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>

        <!-- Gesuchsperiode Stopp -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ 'sachbearbeitung-app.admin.gesuchsperiode.gesuchsperiodeStopp.label' | translate }}</mat-label>
          <input
            formControlName="gesuchsperiodeStopp"
            data-testid="form-gesuchsperiode-gesuchsperiodeStopp"
            matInput
            [matDatepicker]="gesuchsperiodeStoppDatepicker"
          />
          <mat-datepicker-toggle matIconSuffix [for]="gesuchsperiodeStoppDatepicker"></mat-datepicker-toggle>
          <mat-datepicker #gesuchsperiodeStoppDatepicker></mat-datepicker>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- Aufschalttermin Start -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ 'sachbearbeitung-app.admin.gesuchsperiode.aufschaltterminStart.label' | translate }}</mat-label>
          <input
            formControlName="aufschaltterminStart"
            data-testid="form-gesuchsperiode-aufschaltterminStart"
            matInput
            [matDatepicker]="aufschaltterminStartDatepicker"
          />
          <mat-datepicker-toggle matIconSuffix [for]="aufschaltterminStartDatepicker"></mat-datepicker-toggle>
          <mat-datepicker #aufschaltterminStartDatepicker></mat-datepicker>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>

        <!-- Aufschalttermin Stopp -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ 'sachbearbeitung-app.admin.gesuchsperiode.aufschaltterminStopp.label' | translate }}</mat-label>
          <input
            formControlName="aufschaltterminStopp"
            data-testid="form-gesuchsperiode-aufschalttermin-stopp"
            matInput
            [matDatepicker]="aufschaltterminStoppDatepicker"
          />
          <mat-datepicker-toggle matIconSuffix [for]="aufschaltterminStoppDatepicker"></mat-datepicker-toggle>
          <mat-datepicker #aufschaltterminStoppDatepicker></mat-datepicker>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- Einreichefrist Normal -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ 'sachbearbeitung-app.admin.gesuchsperiode.einreichefristNormal.label' | translate }}</mat-label>
          <input
            formControlName="einreichefristNormal"
            data-testid="form-gesuchsperiode-einreichefrist-normal"
            matInput
            [matDatepicker]="einreicherfristNormalDatepicker"
          />
          <mat-datepicker-toggle matIconSuffix [for]="einreicherfristNormalDatepicker"></mat-datepicker-toggle>
          <mat-datepicker #einreicherfristNormalDatepicker></mat-datepicker>
          <mat-hint translate> sachbearbeitung-app.admin.gesuchsperiode.einreichefristNormal.info </mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>

        <!-- Einreichefrist Reduziert -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{
            'sachbearbeitung-app.admin.gesuchsperiode.einreichefristReduziert.label' | translate
          }}</mat-label>
          <input
            formControlName="einreichefristReduziert"
            data-testid="form-gesuchsperiode-einreichefrist-reduziert"
            matInput
            [matDatepicker]="einreicherfristReduziertDatepicker"
          />
          <mat-datepicker-toggle matIconSuffix [for]="einreicherfristReduziertDatepicker"></mat-datepicker-toggle>
          <mat-datepicker #einreicherfristReduziertDatepicker></mat-datepicker>
          <mat-hint translate> sachbearbeitung-app.admin.gesuchsperiode.einreichefristReduziert.info </mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Zweiter Auszahlungstermin Monat-->
      <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
        <mat-label>{{
          'sachbearbeitung-app.admin.gesuchsperiode.zweiterAuszahlungsterminMonat.label' | translate
        }}</mat-label>
        <input
          formControlName="zweiterAuszahlungsterminMonat"
          data-testid="form-gesuchsperiode-zweiterAuszahlungsterminMonat"
          matInput
          type="number"
          min="0"
          max="11"
        />
        <mat-hint translate> sachbearbeitung-app.admin.gesuchsperiode.zweiterAuszahlungsterminMonat.info </mat-hint>
        <mat-error *dvSharedUiFormMessageError="'required'">
          {{ 'shared.form.error.required' | translate }}
        </mat-error>
      </mat-form-field>

      <!-- Tag der Auszahlung für zweiten Auszahlungstermin-->
      <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
        <mat-label>{{
          'sachbearbeitung-app.admin.gesuchsperiode.zweiterAuszahlungsterminTag.label' | translate
        }}</mat-label>
        <input
          formControlName="zweiterAuszahlungsterminTag"
          data-testid="form-gesuchsperiode-zweiterAuszahlungsterminTag"
          matInput
          type="number"
          min="1"
          max="28"
        />
        <mat-hint translate> sachbearbeitung-app.admin.gesuchsperiode.zweiterAuszahlungsterminTag.info </mat-hint>
        <mat-error *dvSharedUiFormMessageError="'required'">
          {{ 'shared.form.error.required' | translate }}
        </mat-error>
      </mat-form-field>

      <!-- Stammdaten -->
      <h1 class="h2 pt-5 mb-4">
        {{ 'sachbearbeitung-app.admin.gesuchsperiode.stammdaten.title' | translate }}
      </h1>

      <div class="row g-4">
        <!-- Freibetrag Vermögen -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>
            {{ 'sachbearbeitung-app.admin.gesuchsperiode.freibetrag_vermoegen.label' | translate }}
          </mat-label>
          <mat-hint translate> sachbearbeitung-app.admin.gesuchsperiode.freibetrag_vermoegen.info </mat-hint>
          <input
            formControlName="freibetrag_vermoegen"
            data-testid="form-gesuchsperiode-freibetrag_vermoegen"
            matInput
            [maskito]="maskitoNumber"
            type="type"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>

        <!-- Freibetrag Erwerbseinkommen -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{
            'sachbearbeitung-app.admin.gesuchsperiode.freibetrag_erwerbseinkommen.label' | translate
          }}</mat-label>
          <input
            formControlName="freibetrag_erwerbseinkommen"
            data-testid="form-gesuchsperiode-freibetrag_erwerbseinkommen"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint translate> sachbearbeitung-app.admin.gesuchsperiode.freibetrag_erwerbseinkommen.info </mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- Einkommensfreibetrag -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ 'sachbearbeitung-app.admin.gesuchsperiode.einkommensfreibetrag.label' | translate }}</mat-label>
          <input
            formControlName="einkommensfreibetrag"
            data-testid="form-gesuchsperiode-einkommensfreibetrag"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint translate> sachbearbeitung-app.admin.gesuchsperiode.einkommensfreibetrag.info </mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>

        <!-- Elternbeteiligungssatz -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{
            'sachbearbeitung-app.admin.gesuchsperiode.elternbeteiligungssatz.label' | translate
          }}</mat-label>
          <input
            formControlName="elternbeteiligungssatz"
            data-testid="form-gesuchsperiode-elternbeteiligungssatz"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- VermogenSatzAngerechnet -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{
            'sachbearbeitung-app.admin.gesuchsperiode.vermogenSatzAngerechnet.label' | translate
          }}</mat-label>
          <input
            formControlName="vermogenSatzAngerechnet"
            data-testid="form-gesuchsperiode-vermogenSatzAngerechnet"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>

        <!-- Integrationszulage -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ 'sachbearbeitung-app.admin.gesuchsperiode.integrationszulage.label' | translate }}</mat-label>
          <input
            formControlName="integrationszulage"
            data-testid="form-gesuchsperiode-integrationszulage"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- Limite_EkFreibetrag_Integrationszulag -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label
            >{{ 'sachbearbeitung-app.admin.gesuchsperiode.limite_EkFreibetrag_Integrationszulage.label' | translate }}
          </mat-label>
          <input
            formControlName="limite_EkFreibetrag_Integrationszulage"
            data-testid="form-gesuchsperiode-limite_EkFreibetrag_Integrationszulage"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>

        <!-- StipLimite_Minimalstipendium -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{
            'sachbearbeitung-app.admin.gesuchsperiode.stipLimite_Minimalstipendium.label' | translate
          }}</mat-label>
          <input
            formControlName="stipLimite_Minimalstipendium"
            data-testid="form-gesuchsperiode-stipLimite_Minimalstipendium"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- Preis pro Mahlzeit -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ 'sachbearbeitung-app.admin.gesuchsperiode.preisProMahlzeit.label' | translate }}</mat-label>
          <input
            formControlName="preisProMahlzeit"
            data-testid="form-gesuchsperiode-preisProMahlzeit"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>

        <!-- Max Säule 3a -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ 'sachbearbeitung-app.admin.gesuchsperiode.maxSaeule3a.label' | translate }}</mat-label>
          <input
            formControlName="maxSaeule3a"
            data-testid="form-gesuchsperiode-maxSaeule3a"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- Anzahl Wochen Lehre -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ 'sachbearbeitung-app.admin.gesuchsperiode.anzahlWochenLehre.label' | translate }}</mat-label>
          <input
            formControlName="anzahlWochenLehre"
            data-testid="form-gesuchsperiode-anzahlWochenLehre"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>

        <!-- Anzahl Wochen Schule -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ 'sachbearbeitung-app.admin.gesuchsperiode.anzahlWochenSchule.label' | translate }}</mat-label>
          <input
            formControlName="anzahlWochenSchule"
            data-testid="form-gesuchsperiode-anzahlWochenSchule"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Vermoegensanteil In Prozent-->
      <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
        <mat-label>{{
          'sachbearbeitung-app.admin.gesuchsperiode.vermoegensanteilInProzent.label' | translate
        }}</mat-label>
        <input
          formControlName="vermoegensanteilInProzent"
          data-testid="form-gesuchsperiode-vermoegensanteilInProzent"
          matInput
          [maskito]="maskitoNumber"
          type="text"
        />
        <mat-hint translate> sachbearbeitung-app.admin.gesuchsperiode.vermoegensanteilInProzent.info </mat-hint>
        <mat-error *dvSharedUiFormMessageError="'required'">
          {{ 'shared.form.error.required' | translate }}
        </mat-error>
      </mat-form-field>

      <!-- Ausbildungskosten (pers. Budget) -->
      <h2 class="h3 pt-5 mb-4">
        {{ 'sachbearbeitung-app.admin.gesuchsperiode.ausbildungskosten.title' | translate }}
      </h2>

      <div class="row g-4">
        <!-- Sekundarstufe II -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ 'sachbearbeitung-app.admin.gesuchsperiode.ausbKosten_SekII.label' | translate }}</mat-label>
          <input
            formControlName="ausbKosten_SekII"
            data-testid="form-gesuchsperiode-AusbKosten_SekII"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>

        <!-- Teritärstufe -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ 'sachbearbeitung-app.admin.gesuchsperiode.ausbKosten_Tertiaer.label' | translate }}</mat-label>
          <input
            formControlName="ausbKosten_Tertiaer"
            data-testid="form-gesuchsperiode-ausbKosten_Tertiaer"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Grundbedarf -->
      <h2 class="h3 pt-5 mb-4">
        {{ 'sachbearbeitung-app.admin.gesuchsperiode.grundbedarf.title' | translate }}
      </h2>

      <div class="row g-4">
        <!-- Redzuierung des Grundbedarfs -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{
            'sachbearbeitung-app.admin.gesuchsperiode.reduzierungDesGrundbedarfs.label' | translate
          }}</mat-label>
          <input
            formControlName="reduzierungDesGrundbedarfs"
            data-testid="form-gesuchsperiode-reduzierungDesGrundbedarfs"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint translate> sachbearbeitung-app.admin.gesuchsperiode.reduzierungDesGrundbedarfs.info </mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>

        <!-- 1 Person -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ 'sachbearbeitung-app.admin.gesuchsperiode.person_1.label' | translate }}</mat-label>
          <input
            formControlName="person_1"
            data-testid="form-gesuchsperiode-person_1"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>

        <!-- 2 Personen -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ 'sachbearbeitung-app.admin.gesuchsperiode.personen_2.label' | translate }}</mat-label>
          <input
            formControlName="personen_2"
            data-testid="form-gesuchsperiode-personen_2"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- 3 Personen -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ 'sachbearbeitung-app.admin.gesuchsperiode.personen_3.label' | translate }}</mat-label>
          <input
            formControlName="personen_3"
            data-testid="form-gesuchsperiode-personen_3"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>

        <!-- 4 Personen -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ 'sachbearbeitung-app.admin.gesuchsperiode.personen_4.label' | translate }}</mat-label>
          <input
            formControlName="personen_4"
            data-testid="form-gesuchsperiode-personen_4"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- 5 Personen -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ 'sachbearbeitung-app.admin.gesuchsperiode.personen_5.label' | translate }}</mat-label>
          <input
            formControlName="personen_5"
            data-testid="form-gesuchsperiode-personen_5"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>

        <!-- 6 Personen -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ 'sachbearbeitung-app.admin.gesuchsperiode.personen_6.label' | translate }}</mat-label>
          <input
            formControlName="personen_6"
            data-testid="form-gesuchsperiode-personen_6"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- 7 Personen -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ 'sachbearbeitung-app.admin.gesuchsperiode.personen_7.label' | translate }}</mat-label>
          <input
            formControlName="personen_7"
            data-testid="form-gesuchsperiode-personen_7"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>

        <!-- Pro weitere Person -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ 'sachbearbeitung-app.admin.gesuchsperiode.proWeiterePerson.label' | translate }}</mat-label>
          <input
            formControlName="proWeiterePerson"
            data-testid="form-gesuchsperiode-proWeiterePerson"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Medizinische Grundversorgung -->
      <h2 class="h3 pt-5 mb-4">
        {{ 'sachbearbeitung-app.admin.gesuchsperiode.medizinische_grundversorgung.title' | translate }}
      </h2>

      <div class="row g-4">
        <!-- Kinder 00-18 -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ 'sachbearbeitung-app.admin.gesuchsperiode.kinder_00_18.label' | translate }}</mat-label>
          <input
            formControlName="kinder_00_18"
            data-testid="form-gesuchsperiode-kinder_00_18"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint translate> sachbearbeitung-app.admin.gesuchsperiode.kinder_00_18.info </mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>

        <!-- Jugendliche Erwachsene 19-25 -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{
            'sachbearbeitung-app.admin.gesuchsperiode.jugendliche_erwachsene_19_25.label' | translate
          }}</mat-label>
          <input
            formControlName="jugendliche_erwachsene_19_25"
            data-testid="form-gesuchsperiode-jugendliche_erwachsene_19_25"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint translate> sachbearbeitung-app.admin.gesuchsperiode.jugendliche_erwachsene_19_25.info </mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- Erwachsene 26-99 -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ 'sachbearbeitung-app.admin.gesuchsperiode.erwachsene_26_99.label' | translate }}</mat-label>
          <input
            formControlName="erwachsene_26_99"
            data-testid="form-gesuchsperiode-erwachsene_26_99"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint translate> sachbearbeitung-app.admin.gesuchsperiode.erwachsene_26_99.info </mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Wohnkosten (Familienbudget) -->
      <h2 class="h3 pt-5 mb-4">
        {{ 'sachbearbeitung-app.admin.gesuchsperiode.wohnkosten-familienbudget.title' | translate }}
      </h2>

      <div class="row g-4">
        <!-- 1 Person (2 Zimmer) -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ 'sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_fam_1pers.label' | translate }}</mat-label>
          <input
            formControlName="wohnkosten_fam_1pers"
            data-testid="form-gesuchsperiode-wohnkosten_fam_1pers"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint translate> sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_fam_1pers.info </mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>

        <!-- 2 Person (3 Zimmer) -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ 'sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_fam_2pers.label' | translate }}</mat-label>
          <input
            formControlName="wohnkosten_fam_2pers"
            data-testid="form-gesuchsperiode-wohnkosten_fam_2pers"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint translate> sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_fam_2pers.info </mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- 3 Person (4 Zimmer) -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ 'sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_fam_3pers.label' | translate }}</mat-label>
          <input
            formControlName="wohnkosten_fam_3pers"
            data-testid="form-gesuchsperiode-wohnkosten_fam_3pers"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint translate> sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_fam_3pers.info </mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>

        <!-- 4 Person (5 Zimmer) -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{ 'sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_fam_4pers.label' | translate }}</mat-label>
          <input
            formControlName="wohnkosten_fam_4pers"
            data-testid="form-gesuchsperiode-wohnkosten_fam_4pers"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint translate> sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_fam_4pers.info </mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- 5+ Personen (5+ Zimmer) -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{
            'sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_fam_5pluspers.label' | translate
          }}</mat-label>
          <input
            formControlName="wohnkosten_fam_5pluspers"
            data-testid="form-gesuchsperiode-wohnkosten_fam_5pluspers"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint translate> sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_fam_5pluspers.info </mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Wohnkosten (Persönliches Budget) -->
      <h2 class="h3 pt-5 mb-4">
        {{ 'sachbearbeitung-app.admin.gesuchsperiode.wohnkosten-persoenlich.title' | translate }}
      </h2>

      <div class="row g-4">
        <!-- 1 Person (2 Zimmer) -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{
            'sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_persoenlich_1pers.label' | translate
          }}</mat-label>
          <input
            formControlName="wohnkosten_persoenlich_1pers"
            data-testid="form-gesuchsperiode-wohnkosten_persoenlich_1pers"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint translate> sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_persoenlich_1pers.info </mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>

        <!-- 2 Person (3 Zimmer) -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{
            'sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_persoenlich_2pers.label' | translate
          }}</mat-label>
          <input
            formControlName="wohnkosten_persoenlich_2pers"
            data-testid="form-gesuchsperiode-wohnkosten_persoenlich_2pers"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint translate> sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_persoenlich_2pers.info </mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- 3 Person (4 Zimmer) -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{
            'sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_persoenlich_3pers.label' | translate
          }}</mat-label>
          <input
            formControlName="wohnkosten_persoenlich_3pers"
            data-testid="form-gesuchsperiode-wohnkosten_persoenlich_3pers"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint translate> sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_persoenlich_3pers.info </mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>

        <!-- 4 Person (5 Zimmer) -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{
            'sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_persoenlich_4pers.label' | translate
          }}</mat-label>
          <input
            formControlName="wohnkosten_persoenlich_4pers"
            data-testid="form-gesuchsperiode-wohnkosten_persoenlich_4pers"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint translate> sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_persoenlich_4pers.info </mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row g-4 mt-1">
        <!-- 5 Person (5+ Zimmer) -->
        <mat-form-field dvSharedUiFormField class="col-12 col-md-6">
          <mat-label>{{
            'sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_persoenlich_5pluspers.label' | translate
          }}</mat-label>
          <input
            formControlName="wohnkosten_persoenlich_5pluspers"
            data-testid="form-gesuchsperiode-wohnkosten_persoenlich_5pluspers"
            matInput
            [maskito]="maskitoNumber"
            type="text"
          />
          <mat-hint translate>
            sachbearbeitung-app.admin.gesuchsperiode.wohnkosten_persoenlich_5pluspers.info
          </mat-hint>
          <mat-error *dvSharedUiFormMessageError="'required'">
            {{ 'shared.form.error.required' | translate }}
          </mat-error>
        </mat-form-field>
      </div>

      @if (store.currentGesuchsperiodeViewSig()?.isEditable ?? true) {
        <dv-shared-ui-form-save
          class="mt-4"
          [loading]="store.currentGesuchsperiode() | rdIsPending"
        ></dv-shared-ui-form-save>
      }
    }
  </form>
</div>
