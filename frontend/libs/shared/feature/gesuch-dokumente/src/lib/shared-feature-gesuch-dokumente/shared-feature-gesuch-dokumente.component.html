@if (gesuchViewSig().loading) {
  <dv-shared-ui-loading data-testid="dokumente-loading"></dv-shared-ui-loading>
} @else {
  <div class="col-12">
    <div class="container card pb-3 pt-3 mt-5 shadow">
      <div class="row overflow-auto">
        <table class="document-table" mat-table [dataSource]="dokumenteDataSourceSig()" [trackBy]="trackByFn">
          <caption class="cdk-visually-hidden">
            {{
              'shared.dokumente.table.description' | translate
            }}
          </caption>

          <!-- status -->
          <ng-container matColumnDef="status">
            <th
              class="status-cell"
              [title]="'shared.dokumente.table.status' | translate"
              mat-header-cell
              *matHeaderCellDef
            ></th>
            <td class="status-cell" mat-cell *matCellDef="let dokument">
              @if (dokument.id) {
                <span class="badge-round bg-success">
                  <i class="material-symbols-rounded fs-6">check</i>
                </span>
              } @else {
                <span class="badge-round bg-warning">
                  <i class="material-symbols-rounded fs-6">exclamation</i>
                </span>
              }
            </td>
          </ng-container>

          <!-- required document -->
          <ng-container matColumnDef="documentName">
            <th mat-header-cell *matHeaderCellDef>
              {{ 'shared.dokumente.table.requiredDocuments' | translate }}
            </th>
            <td mat-cell *matCellDef="let dokument">
              {{ dokument.titleKey | translate }}
            </td>
          </ng-container>

          <!-- form step -->
          <ng-container matColumnDef="formStep">
            <th mat-header-cell *matHeaderCellDef>
              {{ 'shared.dokumente.table.formStep' | translate }}
            </th>
            <td mat-cell *matCellDef="let dokument">
              <a [routerLink]="['/gesuch', dokument.formStep.route, gesuchViewSig().gesuchId]">
                {{ dokument.formStep.translationKey | translate }}
              </a>
            </td>
          </ng-container>

          <!-- actions -->
          <ng-container matColumnDef="actions">
            <th
              [title]="'shared.dokumente.table.actions' | translate"
              class="action-cell"
              mat-header-cell
              *matHeaderCellDef
            ></th>
            <td mat-cell class="action-cell" *matCellDef="let dokument">
              <div class="action-cell-content">
                <dv-shared-pattern-document-upload
                  [optionsSig]="dokument.documentOptions"
                ></dv-shared-pattern-document-upload>
              </div>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>

          <tr [ngClass]="{ warning: !dokument.id }" mat-row *matRowDef="let dokument; columns: displayedColumns"></tr>
        </table>
      </div>
    </div>
  </div>

  <!-- Buttons -->
  <dv-shared-ui-step-form-buttons>
    <button type="button" class="btn btn-primary" (click)="handleContinue()" data-testid="button-continue">
      {{ 'shared.form.gonext' | translate }}
    </button>
  </dv-shared-ui-step-form-buttons>
}
